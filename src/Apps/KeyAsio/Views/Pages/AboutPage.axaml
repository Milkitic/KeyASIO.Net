<UserControl
  x:Class="KeyAsio.Views.Pages.AboutPage"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:controls="using:KeyAsio.Views.Controls"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:lang="clr-namespace:KeyAsio.Lang"
  xmlns:materialIcons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:suki="https://github.com/kikipoulet/SukiUI"
  xmlns:vm="using:KeyAsio.ViewModels"
  x:Name="AboutRoot"
  d:DesignHeight="800"
  d:DesignWidth="1000"
  x:DataType="vm:MainWindowViewModel"
  mc:Ignorable="d">

  <ScrollViewer>
    <StackPanel Margin="20" Spacing="20">
      <!--  Intro & System Info Unified Card  -->
      <suki:GlassCard Classes="Header">
        <Grid ColumnDefinitions="*,Auto">
          <StackPanel Spacing="20">
            <!--  Header Text  -->
            <StackPanel Spacing="5">
              <TextBlock
                Classes="h2"
                FontWeight="Bold"
                Text="{I18N {x:Static lang:SRKeys.About_Title}}" />
              <TextBlock
                MaxWidth="600"
                Margin="0,5,0,0"
                HorizontalAlignment="Left"
                Opacity="0.8"
                Text="{I18N {x:Static lang:SRKeys.About_Description}}"
                TextWrapping="Wrap" />
            </StackPanel>

            <!--  Actions & Status  -->
            <StackPanel Spacing="15">
              <StackPanel Orientation="Horizontal" Spacing="15">
                <!--  Check Updates Button  -->
                <Button
                  Classes="Flat"
                  Command="{Binding UpdateService.CheckForUpdatesCommand}"
                  Content="{I18N {x:Static lang:SRKeys.Settings_CheckForUpdates}}" />
                <!--  Github Button  -->
                <Button
                  Padding="8"
                  Classes="Flat"
                  Command="{Binding About.OpenUrlCommand}"
                  CommandParameter="https://github.com/Milkitic/KeyASIO.Net">
                  <Button.Content>
                    <materialIcons:MaterialIcon
                      Width="24"
                      Height="24"
                      Kind="Github" />
                  </Button.Content>
                </Button>
                <!--  Discord Button  -->
                <Button
                  Command="{Binding About.OpenUrlCommand}"
                  CommandParameter="https://discord.gg/rwwEbCECem"
                  Content="Join Discord"
                  IsVisible="{Binding !LanguageManager.IsChinese}" />
                <Button
                  Command="{Binding About.OpenUrlCommand}"
                  CommandParameter="https://qm.qq.com/q/yLvDSAjY6O"
                  Content="加入 QQ 群组"
                  IsVisible="{Binding LanguageManager.IsChinese}" />
              </StackPanel>

              <!--  Version Info  -->
              <StackPanel Opacity="0.55" Spacing="5">
                <TextBlock FontSize="12" IsVisible="{Binding UpdateService.NewVersion, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                  <Run Text="{I18N {x:Static lang:SRKeys.Settings_UpdateAvailablePrefix}}" /><Run Text="{Binding UpdateService.NewVersion}" />
                </TextBlock>
                <TextBlock
                  FontSize="12"
                  IsVisible="{Binding UpdateService.NewVersion, Converter={x:Static StringConverters.IsNullOrEmpty}}"
                  Text="{I18N {x:Static lang:SRKeys.Settings_NoUpdatesAvailable}}" />
                <!--  Copyright  -->
                <StackPanel
                  Margin="0,5,0,0"
                  Orientation="Horizontal"
                  Spacing="5">
                  <TextBlock FontSize="12" Text="{I18N {x:Static lang:SRKeys.Settings_CopyrightLine}}" />
                  <TextBlock FontSize="12" Text="{I18N {x:Static lang:SRKeys.Settings_LicensedUnderMpl}}" />
                </StackPanel>
              </StackPanel>
            </StackPanel>
          </StackPanel>

          <!--  Large Logo on Right  -->
          <Image
            Grid.Column="1"
            Width="128"
            Height="128"
            Margin="40,20,20,0"
            VerticalAlignment="Top"
            Opacity="0.9"
            Source="/Assets/KeyAsio.ico">
            <Image.Effect>
              <DropShadowEffect
                BlurRadius="20"
                OffsetX="0"
                OffsetY="5"
                Opacity="0.2"
                Color="Black" />
            </Image.Effect>
          </Image>
        </Grid>
      </suki:GlassCard>

      <ScrollViewer HorizontalScrollBarVisibility="Auto">
        <ItemsControl ItemsSource="{Binding About.Projects}">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <StackPanel Orientation="Horizontal" Spacing="15" />
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <suki:GlassCard
                Width="350"
                Padding="15"
                Classes="Surface"
                Command="{Binding $parent[UserControl].((vm:MainWindowViewModel)DataContext).About.OpenUrlCommand}"
                CommandParameter="{Binding Url}"
                Cursor="Hand"
                IsInteractive="True">
                <StackPanel Spacing="10">
                  <Grid ColumnDefinitions="*, Auto">
                    <TextBlock
                      FontSize="16"
                      FontWeight="Bold"
                      Text="{Binding Name}" />
                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                      <materialIcons:MaterialIcon
                        Width="16"
                        Height="16"
                        Kind="OpenInNew"
                        Opacity="0.5" />
                    </StackPanel>
                  </Grid>
                  <TextBlock
                    MinHeight="40"
                    Opacity="0.7"
                    Text="{Binding Description}"
                    TextTrimming="CharacterEllipsis"
                    TextWrapping="Wrap" />
                </StackPanel>
              </suki:GlassCard>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </ScrollViewer>
      <Separator Opacity="0.2" />

      <!--  Sponsors 3D Cloud  -->
      <Grid Height="500" RowDefinitions="Auto,*">
        <StackPanel
          Grid.Row="0"
          HorizontalAlignment="Center"
          Spacing="5">
          <StackPanel
            HorizontalAlignment="Center"
            Orientation="Horizontal"
            Spacing="10">
            <materialIcons:MaterialIcon
              Width="24"
              Height="24"
              Foreground="#FF4081"
              Kind="Heart" />
            <TextBlock
              Classes="h3"
              FontWeight="Bold"
              Text="{I18N {x:Static lang:SRKeys.About_SpecialThanks}}" />
          </StackPanel>
          <TextBlock
            HorizontalAlignment="Center"
            Opacity="0.6"
            Text="{I18N {x:Static lang:SRKeys.About_SpecialThanksDescription}}" />
        </StackPanel>

        <Grid Grid.Row="1" Margin="0,20">
          <!--  Ambient Glow  -->
          <Border
            Width="400"
            Height="400"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            CornerRadius="200"
            Opacity="0.05">
            <Border.Background>
              <RadialGradientBrush Center="50%,50%" GradientOrigin="50%,50%" Radius="0.5">
                <GradientStop Offset="0" Color="{DynamicResource SukiPrimaryColor}" />
                <GradientStop Offset="1" Color="Transparent" />
              </RadialGradientBrush>
            </Border.Background>
            <Border.Effect>
              <BlurEffect Radius="50" />
            </Border.Effect>
          </Border>

          <!--  3D Cloud  -->
          <controls:SupporterSphere
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            ItemsSource="{Binding About.Supporters}" />

          <TextBlock
            Margin="0,0,0,10"
            HorizontalAlignment="Center"
            VerticalAlignment="Bottom"
            FontSize="12"
            FontStyle="Italic"
            Opacity="0.3"
            Text="{I18N {x:Static lang:SRKeys.About_DragToExplore}}" />
        </Grid>
      </Grid>

      <!--<Separator Opacity="0.2" />-->

      <!--  Projects Section  -->
      <!--      <StackPanel Spacing="15">

        <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Spacing="10">
          <materialIcons:MaterialIcon  Kind="RocketLaunch" Width="24" Height="24" Foreground="{DynamicResource SukiPrimaryColor}"/>
          <TextBlock
            Classes="h3"
            FontWeight="SemiBold"
            VerticalAlignment="Center"
            Text="探索更多" />
        </StackPanel>
        <ItemsControl ItemsSource="{Binding About.Projects}" Margin="0,0,-15,0">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <WrapPanel ItemSpacing="15" LineSpacing="15" />
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <suki:GlassCard Width="300" Classes="Surface">
                <StackPanel Spacing="10">
                  <Grid ColumnDefinitions="*, Auto">
                    <TextBlock
                      FontSize="16"
                      FontWeight="Bold"
                      Text="{Binding Name}" />
                    <materialIcons:MaterialIcon
                      Grid.Column="1"
                      Width="16"
                      Height="16"
                      Kind="OpenInNew"
                      Opacity="0.5" />
                  </Grid>
                  <TextBlock
                    MinHeight="40"
                    Opacity="0.7"
                    Text="{Binding Description}"
                    TextTrimming="CharacterEllipsis"
                    TextWrapping="Wrap" />
                  <Button
                    HorizontalAlignment="Right"
                    Classes="Flat"
                    Command="{Binding $parent[UserControl].((vm:MainWindowViewModel)DataContext).About.OpenUrlCommand}"
                    CommandParameter="{Binding Url}"
                    Content="访问" />
                </StackPanel>
              </suki:GlassCard>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </StackPanel>-->
    </StackPanel>
  </ScrollViewer>
</UserControl>
