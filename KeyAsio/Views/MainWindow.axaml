<suki:SukiWindow
  x:Class="KeyAsio.Views.MainWindow"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:materialIcons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:suki="https://github.com/kikipoulet/SukiUI"
  xmlns:vm="using:KeyAsio.ViewModels"
  Title="KeyAsio"
  Width="900"
  Height="650"
  x:DataType="vm:MainWindowViewModel"
  BackgroundAnimationEnabled="False"
  BackgroundStyle="GradientSoft"
  BackgroundTransitionsEnabled="False"
  Icon="/Assets/KeyAsio.ico"
  Loaded="Control_OnLoaded"
  TitleBarAnimationEnabled="False"
  mc:Ignorable="d">

  <Design.DataContext>
    <!--
      This only sets the DataContext for the previewer in an IDE,
      to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs)
    -->
    <vm:MainWindowViewModel />
  </Design.DataContext>

  <suki:SukiSideMenu
    IsSearchEnabled="False"
    IsSelectedItemContentMovable="False"
    IsToggleButtonVisible="True">
    <suki:SukiSideMenu.Items>

      <!--  PAGE 1: DASHBOARD  -->
      <suki:SukiSideMenuItem Classes="Compact" Header="Dashboard">
        <suki:SukiSideMenuItem.Icon>
          <materialIcons:MaterialIcon Kind="ViewDashboard" />
        </suki:SukiSideMenuItem.Icon>
        <suki:SukiSideMenuItem.PageContent>
          <Grid Margin="20" RowDefinitions="Auto,*,Auto">

            <!--  Top: Switcher  -->
            <suki:GlassCard Margin="0,0,0,15" Classes="Surface">
              <Grid ColumnDefinitions="*,Auto">
                <StackPanel
                  VerticalAlignment="Center"
                  Orientation="Horizontal"
                  Spacing="10">
                  <materialIcons:MaterialIcon Foreground="{DynamicResource SukiPrimaryColor}" Kind="LightningBolt" />
                  <TextBlock
                    VerticalAlignment="Center"
                    FontWeight="DemiBold"
                    Text="Engine Status" />
                </StackPanel>
                <ToggleSwitch
                  Grid.Column="1"
                  IsChecked="{Binding RealtimeMode}"
                  OffContent="Key Only (Manual)"
                  OnContent="Sync Mode (Realtime)" />
              </Grid>
            </suki:GlassCard>

            <!--  Center: The Core (Sphere visualization)  -->
            <Grid
              Grid.Row="1"
              HorizontalAlignment="Center"
              VerticalAlignment="Center">
              <!--  Outer Glow Ring (Simulated with Border/Shadow)  -->
              <Border
                Width="220"
                Height="220"
                BorderBrush="{DynamicResource SukiPrimaryColor}"
                BorderThickness="2"
                CornerRadius="150"
                Opacity="0.2">
                <Border.Effect>
                  <BlurEffect Radius="20" />
                </Border.Effect>
              </Border>

              <!--  Main Sphere  -->
              <suki:GlassCard
                Width="180"
                Height="180"
                BorderThickness="0"
                CornerRadius="100">
                <Grid>
                  <Border
                    Background="{DynamicResource SukiPrimaryColor}"
                    CornerRadius="100"
                    Opacity="0.1" />
                  <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <materialIcons:MaterialIcon
                      Width="48"
                      Height="48"
                      Margin="0,0,0,10"
                      Foreground="{DynamicResource SukiPrimaryColor}"
                      Kind="LinkVariant" />
                    <TextBlock
                      HorizontalAlignment="Center"
                      Classes="h2"
                      FontWeight="Bold"
                      Foreground="{DynamicResource SukiText}"
                      Text="SYNCED" />
                    <TextBlock
                      Margin="0,5,0,0"
                      HorizontalAlignment="Center"
                      Classes="Caption"
                      Opacity="0.6"
                      Text="ID: 14022" />
                  </StackPanel>
                </Grid>
              </suki:GlassCard>
            </Grid>

            <!--  Bottom: Stats & Quick Keys  -->
            <Grid
              Grid.Row="2"
              Grid.ColumnSpan="2"
              Margin="0,20,0,0"
              ColumnDefinitions="*,*">
              <!--  Stats  -->
              <StackPanel
                Margin="0,0,10,0"
                VerticalAlignment="Center"
                Spacing="5">
                <suki:GlassCard Padding="15">
                  <Grid ColumnDefinitions="*,Auto">
                    <StackPanel>
                      <TextBlock
                        Classes="Caption"
                        Opacity="0.6"
                        Text="Input Latency" />
                      <TextBlock
                        Classes="h4"
                        Foreground="{DynamicResource SukiPrimaryColor}"
                        Text="0.4 ms" />
                    </StackPanel>
                    <materialIcons:MaterialIcon
                      Grid.Column="1"
                      Width="24"
                      Height="24"
                      Kind="Speedometer"
                      Opacity="0.3" />
                  </Grid>
                </suki:GlassCard>
              </StackPanel>

              <!--  Key Bindings  -->
              <suki:GlassCard
                Grid.Column="1"
                Margin="10,0,0,0"
                Padding="15">
                <Grid RowDefinitions="Auto,*">
                  <DockPanel LastChildFill="False">
                    <TextBlock FontWeight="Bold" Text="Quick Bindings" />
                    <CheckBox
                      Margin="0,-5,0,0"
                      Content="Raw Input"
                      DockPanel.Dock="Right"
                      IsChecked="True" />
                  </DockPanel>

                  <ItemsControl Grid.Row="1" Margin="0,10,0,0">
                    <ItemsControl.ItemsPanel>
                      <ItemsPanelTemplate>
                        <StackPanel
                          HorizontalAlignment="Left"
                          Orientation="Horizontal"
                          Spacing="10" />
                      </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <!--  Mock Items  -->
                    <suki:GlassCard Padding="15,10" CornerRadius="8">
                      <TextBlock
                        FontSize="16"
                        FontWeight="Bold"
                        Text="Z" />
                    </suki:GlassCard>
                    <suki:GlassCard Padding="15,10" CornerRadius="8">
                      <TextBlock
                        FontSize="16"
                        FontWeight="Bold"
                        Text="X" />
                    </suki:GlassCard>
                    <Button Padding="10" Classes="Flat">
                      <materialIcons:MaterialIcon Kind="Plus" />
                    </Button>
                  </ItemsControl>
                </Grid>
              </suki:GlassCard>
            </Grid>
          </Grid>
        </suki:SukiSideMenuItem.PageContent>
      </suki:SukiSideMenuItem>

      <!--  PAGE 2: DEVICES  -->
      <suki:SukiSideMenuItem Classes="Compact" Header="Audio Engine">
        <suki:SukiSideMenuItem.Icon>
          <materialIcons:MaterialIcon Kind="Speaker" />
        </suki:SukiSideMenuItem.Icon>
        <suki:SukiSideMenuItem.PageContent>
          <ScrollViewer>
            <StackPanel Margin="20" Spacing="20">
              <TextBlock
                Classes="h3"
                FontWeight="Bold"
                Text="Driver Configuration" />

              <suki:GlassCard>
                <suki:GroupBox Header="Backend Selection">
                  <StackPanel Spacing="15">
                    <Grid ColumnDefinitions="120,*">
                      <TextBlock
                        VerticalAlignment="Center"
                        Opacity="0.7"
                        Text="Driver Type" />
                      <ComboBox
                        Grid.Column="1"
                        HorizontalAlignment="Stretch"
                        SelectedIndex="0">
                        <ComboBoxItem>WASAPI Exclusive</ComboBoxItem>
                        <ComboBoxItem>ASIO</ComboBoxItem>
                        <ComboBoxItem>DirectSound</ComboBoxItem>
                      </ComboBox>
                    </Grid>
                    <Grid ColumnDefinitions="120,*">
                      <TextBlock
                        VerticalAlignment="Center"
                        Opacity="0.7"
                        Text="Output Device" />
                      <ComboBox
                        Grid.Column="1"
                        HorizontalAlignment="Stretch"
                        SelectedIndex="0">
                        <ComboBoxItem>Focusrite USB Audio</ComboBoxItem>
                        <ComboBoxItem>Realtek HD Audio</ComboBoxItem>
                      </ComboBox>
                    </Grid>
                    <Grid ColumnDefinitions="120,*">
                      <TextBlock
                        VerticalAlignment="Center"
                        Opacity="0.7"
                        Text="Sample Rate" />
                      <ComboBox
                        Grid.Column="1"
                        HorizontalAlignment="Stretch"
                        SelectedIndex="3">
                        <ComboBoxItem>44100 Hz</ComboBoxItem>
                        <ComboBoxItem>48000 Hz</ComboBoxItem>
                        <ComboBoxItem>96000 Hz</ComboBoxItem>
                        <ComboBoxItem>192000 Hz</ComboBoxItem>
                      </ComboBox>
                    </Grid>
                  </StackPanel>
                </suki:GroupBox>
              </suki:GlassCard>

              <TextBlock
                Margin="0,10,0,0"
                Classes="h3"
                FontWeight="Bold"
                Text="Latency &amp; Buffer" />

              <suki:GlassCard>
                <StackPanel Spacing="20">
                  <DockPanel>
                    <TextBlock VerticalAlignment="Center" Text="Target Buffer Size" />
                    <TextBlock
                      DockPanel.Dock="Right"
                      FontWeight="Bold"
                      Foreground="{DynamicResource SukiPrimaryColor}"
                      Text="3 ms" />
                  </DockPanel>
                  <Slider
                    IsSnapToTickEnabled="True"
                    Maximum="50"
                    Minimum="1"
                    TickFrequency="1"
                    Value="3" />

                  <Separator Opacity="0.1" />

                  <Grid ColumnDefinitions="*,*">
                    <ToggleSwitch
                      Content="Exclusive Mode"
                      IsChecked="True"
                      OffContent="Shared"
                      OnContent="Exclusive" />
                    <ToggleSwitch
                      Grid.Column="1"
                      Content="Audio Limiter"
                      IsChecked="True"
                      OffContent="Raw"
                      OnContent="Active" />
                  </Grid>
                </StackPanel>
              </suki:GlassCard>
            </StackPanel>
          </ScrollViewer>
        </suki:SukiSideMenuItem.PageContent>
      </suki:SukiSideMenuItem>

      <!--  PAGE 3: GAME LINK  -->
      <suki:SukiSideMenuItem Classes="Compact" Header="Game Link">
        <suki:SukiSideMenuItem.Icon>
          <materialIcons:MaterialIcon Kind="Link" />
        </suki:SukiSideMenuItem.Icon>
        <suki:SukiSideMenuItem.PageContent>
          <ScrollViewer>
            <StackPanel Margin="20" Spacing="20">
              <!--  Skin  -->
              <suki:GlassCard>
                <suki:GroupBox Header="Skin Resources">
                  <Grid ColumnDefinitions="60, *">
                    <Border
                      Margin="0,0,15,0"
                      Background="#22000000"
                      CornerRadius="8">
                      <materialIcons:MaterialIcon Kind="ImageBroken" Opacity="0.3" />
                    </Border>
                    <StackPanel Grid.Column="1" Spacing="5">
                      <TextBlock Text="Selected Skin" />
                      <ComboBox HorizontalAlignment="Stretch" SelectedIndex="0">
                        <ComboBoxItem>WhiteCat 2.0 (CK)</ComboBoxItem>
                        <ComboBoxItem>Yugen</ComboBoxItem>
                        <ComboBoxItem>Default</ComboBoxItem>
                      </ComboBox>
                    </StackPanel>
                  </Grid>
                </suki:GroupBox>
              </suki:GlassCard>

              <!--  Sync & Balance  -->
              <suki:GlassCard>
                <suki:GroupBox Header="Playback Control">
                  <StackPanel Spacing="15">
                    <DockPanel>
                      <TextBlock VerticalAlignment="Center" Text="Object Balance (Panning)" />
                      <TextBlock
                        DockPanel.Dock="Right"
                        FontFamily="Consolas"
                        Text="0.66" />
                    </DockPanel>
                    <Slider
                      Maximum="1"
                      Minimum="-1"
                      TickFrequency="0.1"
                      Value="0.666667" />
                    <Grid Margin="0,-10,0,0" ColumnDefinitions="Auto,*,Auto">
                      <TextBlock
                        FontSize="10"
                        Opacity="0.5"
                        Text="Left" />
                      <TextBlock
                        Grid.Column="1"
                        HorizontalAlignment="Center"
                        FontSize="10"
                        Opacity="0.5"
                        Text="Center" />
                      <TextBlock
                        Grid.Column="2"
                        FontSize="10"
                        Opacity="0.5"
                        Text="Right" />
                    </Grid>

                    <StackPanel
                      Margin="0,10,0,0"
                      Orientation="Horizontal"
                      Spacing="20">
                      <CheckBox Content="Force Nightcore Beats" />
                      <CheckBox Content="Override Music (Exp.)" />
                    </StackPanel>
                  </StackPanel>
                </suki:GroupBox>
              </suki:GlassCard>

              <!--  Filters  -->
              <suki:GlassCard>
                <suki:GroupBox Header="Audio Filters">
                  <UniformGrid Columns="2">
                    <CheckBox Margin="0,5" Content="Disable Map Hitsounds" />
                    <CheckBox Margin="0,5" Content="Disable Storyboard" />
                    <CheckBox Margin="0,5" Content="Disable Slider Ticks" />
                    <CheckBox Margin="0,5" Content="Disable Combo Break" />
                    <CheckBox Margin="0,5" Content="Ignore Volume Changes" />
                  </UniformGrid>
                </suki:GroupBox>
              </suki:GlassCard>
            </StackPanel>
          </ScrollViewer>
        </suki:SukiSideMenuItem.PageContent>
      </suki:SukiSideMenuItem>

      <!--  PAGE 4: SETTINGS  -->
      <suki:SukiSideMenuItem Classes="Compact" Header="Settings">
        <suki:SukiSideMenuItem.Icon>
          <materialIcons:MaterialIcon Kind="Cog" />
        </suki:SukiSideMenuItem.Icon>
        <suki:SukiSideMenuItem.PageContent>
          <StackPanel Margin="20" Spacing="20">
            <TextBlock
              Classes="h3"
              FontWeight="Bold"
              Text="System Configuration" />

            <suki:GlassCard>
              <StackPanel Spacing="15">
                <TextBlock Text="osu! Folder Path" />
                <Grid ColumnDefinitions="*, Auto">
                  <TextBox
                    Margin="0,0,10,0"
                    IsReadOnly="True"
                    Text="E:\Games\osu!" />
                  <Button Grid.Column="1" Classes="Flat">
                    <materialIcons:MaterialIcon Kind="FolderOpen" />
                  </Button>
                </Grid>

                <Separator Opacity="0.1" />

                <Grid ColumnDefinitions="*,Auto">
                  <StackPanel>
                    <TextBlock Text="Audio Cache Threads" />
                    <TextBlock
                      FontSize="10"
                      Opacity="0.5"
                      Text="Restart required" />
                  </StackPanel>
                  <NumericUpDown
                    Grid.Column="1"
                    Width="100"
                    Maximum="16"
                    Minimum="1"
                    Value="2" />
                </Grid>
              </StackPanel>
            </suki:GlassCard>

            <suki:GlassCard>
              <StackPanel>
                <ToggleSwitch
                  Content="Debug Console"
                  OffContent="Hidden"
                  OnContent="Visible" />
                <ToggleSwitch
                  Margin="0,10,0,0"
                  Content="Error Reporting"
                  IsChecked="True" />
              </StackPanel>
            </suki:GlassCard>
          </StackPanel>
        </suki:SukiSideMenuItem.PageContent>
      </suki:SukiSideMenuItem>

    </suki:SukiSideMenu.Items>

    <!--  HEADER LOGO  -->
    <suki:SukiSideMenu.HeaderContent>
      <StackPanel Margin="0,20,0,20" HorizontalAlignment="Center">
        <Image
          Width="80"
          Height="80"
          Margin="0,0,0,10"
          Source="/Assets/KeyAsio.ico" />
        <TextBlock
          HorizontalAlignment="Center"
          Classes="h4"
          FontWeight="Black"
          Text="KeyAsio" />
        <TextBlock
          HorizontalAlignment="Center"
          Opacity="0.5"
          Text="v2.0.1" />
      </StackPanel>
    </suki:SukiSideMenu.HeaderContent>

    <!--  FOOTER VOLUME  -->
    <suki:SukiSideMenu.FooterContent>
      <StackPanel Margin="15">
        <Separator Margin="0,0,0,10" Opacity="0.1" />
        <Grid ColumnDefinitions="Auto,*,Auto">
          <materialIcons:MaterialIcon
            Margin="0,0,10,0"
            Kind="VolumeHigh"
            Opacity="0.7" />
          <Slider
            Grid.Column="1"
            Maximum="100"
            Value="35" />
          <TextBlock
            Grid.Column="2"
            Width="35"
            Margin="10,0,0,0"
            VerticalAlignment="Center"
            Text="35%"
            TextAlignment="Right" />
        </Grid>
      </StackPanel>
    </suki:SukiSideMenu.FooterContent>

  </suki:SukiSideMenu>
</suki:SukiWindow>